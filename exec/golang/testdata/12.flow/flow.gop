x := 0
if t := false; t {
	x = 3
} else {
	x = 5
}
println("x:", x)

x = 0
switch s := "Hello"; string(s) {
default:
	x = 7
case "world", "hi":
	x = 5
case "xsw":
	x = 3
}
println("x:", x)

v := "Hello"
switch {
case v == "xsw":
	x = 3
case v == "Hello", v == "world":
	x = 9
default:
	x = 7
}
println("x:", x)

v = "Hello"
switch {
case v == "xsw":
	x = 3
case v == "hi", v == "world":
	x = 9
default:
	x = 11
}
println("x:", x)

switch {
}

switch v {
default:
	println(v)
}

switch y := v; y {
default:
	println(y)
}

println("fallthrough with tag")
switch v {
case "Hello":
	println(v)
	fallthrough
case "hi":
	println(v)
	fallthrough
default:
	println(v)
}
println("fallthrough without tag")

z := 3
switch {
case z < 10:
	println(z)
	fallthrough
case z == 10:
	println(z)
	fallthrough
case z > 10:
	println(z)
	fallthrough
default:
	println(z)
}

// switch with break
switch z {
case 3:
	if v == "Hello" {
		println("break")
		break
	}
	println("break fail")
default:
	println(z)
}

goto L
println("before")
L:
	println("over")

	i := 0
L2:
	if i < 3 {
		println(i)
		i++
		goto L2
	}
	println("over")

	x = 0
L3:
	for i := 0; i < 5; i++ {
		switch i {
		case 1:
			println(x)
			x++
			continue L3
		case 2:
			println(x)
			x++
			break
		case 3:
			println(x)
			break L3
		case 4:
			println(x)
		default:
			x = 7
			println(x)
		}
	}

	for k, v <- [1, 2, 3] {
		if k < 1 {
			continue
		}
		if k > 1 {
			break
		}
		println(k, v)
	}

L4:
	for k, v <- [1, 2, 3] {
		if k < 1 {
			continue L4
		}
		if k > 1 {
			break L4
		}
		println(k, v)
	}

	mapData := {0: 1, 1: 3, 2: 5, 3: 7}
	sum := 0
LM:
	for i, _ <- mapData {
		if mapData[i] < 7 {
			continue LM
		}
		for j := 0; j < len(mapData); j++ {
			if mapData[j] > 3 {
				break LM
			}
			sum += mapData[i] + mapData[j]
		}
	}
	println(sum)

	fns := make([]func() int, 3)
	for mi, mx <- {0: 3, 1: 15, 2: 777} {
		mv := mx
		fns[mi] = func() int {
			return mv
		}
	}
	println("values:", fns[0](), fns[1](), fns[2]())
